FROM ubuntu:16.04

RUN sed -i 's/archive.ubuntu.com/asia-east1.gce.archive.ubuntu.com/g' /etc/apt/sources.list && apt update && apt-get install -y lib32z1 xinetd && rm -rf /var/lib/apt/lists/ && rm -rf /root/.cache && apt-get autoclean && rm -rf /tmp/* /var/lib/apt/* /var/cache/* /var/log/*
#apt update && apt-get install -y lib32z1 xinetd && rm -rf /var/lib/apt/lists/ && rm -rf /root/.cache && apt-get autoclean && rm -rf /tmp/* /var/lib/apt/* /var/cache/* /var/log/*

COPY ./pwn.xinetd /etc/xinetd.d/pwn

COPY ./service.sh /service.sh

RUN chmod +x /service.sh

# useradd and put flag
RUN useradd -m 1 && useradd -m 2 && useradd -m 32bit_pwn && useradd -m babyheap_0ctf_2017 && useradd -m babyrop && useradd -m bjdctf_2020_babyrop && useradd -m bjdctf_2020_babyrop2 && useradd -m bs && useradd -m bssbufpoc && useradd -m bssbufpoc2 && useradd -m canarystack && useradd -m canarystack_plus && useradd -m canarytest && useradd -m ciscn_2019_n_3 && useradd -m easyrop && useradd -m fm && useradd -m fmt_0 && useradd -m fmt_1 && useradd -m fmt_2 && useradd -m fmt_arw && useradd -m fmt_level100 && useradd -m heap && useradd -m not_stack_fmt && useradd -m prob1 && useradd -m prob2 && useradd -m prob3 && useradd -m prob4 && useradd -m prob5 && useradd -m prob6 && useradd -m prob7 && useradd -m prob8 && useradd -m ret2libc && useradd -m sc_jmprsi && useradd -m sc_jmprsp && useradd -m spwn && useradd -m stack1 && useradd -m stack2 && useradd -m wdb_2018_2nd_easyfmt && useradd -m x32test && echo 'flag{9db885d5-2ae6-4d58-9026-e157f272c2aa}' > /home/1/flag && echo 'flag{7067d0f2-dd6d-4355-a64e-51d81648569e}' > /home/2/flag && echo 'flag{b2a491c8-5030-4afa-a706-e866db834f24}' > /home/32bit_pwn/flag && echo 'flag{75f2f366-b9a3-41bf-9e22-6dcb409ddb4e}' > /home/babyheap_0ctf_2017/flag && echo 'flag{b2a481c8-5031-4afb-ad06-e877db86ef23}' > /home/babyrop/flag && echo 'flag{3376d1b8-bc19-4ccd-aac9-85a5dcec7505}' > /home/bjdctf_2020_babyrop/flag && echo 'flag{f9f3d8ee-f8ab-42ff-92c6-21cd0bb4f031}' > /home/bjdctf_2020_babyrop2/flag && echo 'flag{4078bfd9-17d4-4f76-be47-1c70b6bc2ea3}' > /home/bs/flag && echo 'flag{29c47b5d-bb96-4f58-ab31-8d628ef70c96}' > /home/bssbufpoc/flag && echo 'flag{c8bf59d8-7b53-4ad2-b9cc-ff551d8496a7}' > /home/bssbufpoc2/flag && echo 'flag{575a1020-6394-46ae-b0fa-6831bfe6cf12}' > /home/canarystack/flag && echo 'flag{832e4c21-06d1-40da-a2ea-364c142e2e5e}' > /home/canarystack_plus/flag && echo 'flag{32680430-394a-4500-94ed-6ada16fb1964}' > /home/canarytest/flag && echo 'flag{301527da-c38a-4072-b75e-eaf6d86faaed}' > /home/ciscn_2019_n_3/flag && echo 'flag{8a29859c-6d29-4f49-9f9b-40ddf497ed15}' > /home/easyrop/flag && echo 'flag{f617c87f-39b5-4cf1-bcba-5d2bffae543e}' > /home/fm/flag && echo 'flag{crazy_thursday_v_me_50}' > /home/fmt_0/flag && echo 'flag{6a84225d-ecd3-4094-96c2-9073171eea22}' > /home/fmt_1/flag && echo 'flag{0cc7b414-675a-4bdc-aaae-672ba2b1c04f}' > /home/fmt_2/flag && echo 'flag{d05a2cdc-56f4-4eac-bf19-932338909b8e}' > /home/fmt_arw/flag && echo 'flag{4da64473-5bf3-4025-ad1e-ccbbabb5c648}' > /home/fmt_level100/flag && echo 'flag{14cb0de6-a7a7-4bf5-ba7d-04c6dcfc55e7}' > /home/heap/flag && echo 'flag{6fe6c76c-0d91-4e5c-ad8e-8c296066b7cd}' > /home/not_stack_fmt/flag && echo 'flag{966b0f62-f9d8-4f75-92db-d3e18571b599}' > /home/prob1/flag && echo 'flag{a4566443-ea1c-4062-8189-6e82fab6863c}' > /home/prob2/flag && echo 'flag{1f1f91f4-6004-486b-9f01-ff83ae074d7a}' > /home/prob3/flag && echo 'flag{332b6828-902e-4d48-be11-bf45492b841d}' > /home/prob4/flag && echo 'flag{968204a1-f141-46f7-8527-cd40013faf16}' > /home/prob5/flag && echo 'flag{35541373-7b65-48a5-9d4a-fe25709599bf}' > /home/prob6/flag && echo 'flag{046542d8-93cb-4792-a6f7-23e8b900597c}' > /home/prob7/flag && echo 'flag{4c456fc6-8c7b-4a9f-afd0-ddbd8e3a451f}' > /home/prob8/flag && echo 'flag{b22231c8-5340-3a5a-3746-e363d185a426}' > /home/ret2libc/flag && echo 'flag{31e15ca1-5b57-414b-b3bf-26c2af32a01e}' > /home/sc_jmprsi/flag && echo 'flag{b2a491c8-5030-4afa-a706-e866db83ef23}' > /home/sc_jmprsp/flag && echo 'flag{ff2f76b2-7c32-49ad-8119-7487dc3b22b4}' > /home/spwn/flag && echo 'flag{0a71771b-cf98-4454-bcd7-d17e326e41de}' > /home/stack1/flag && echo 'flag{f69e8486-69b7-4997-9cd7-2ae60aa0aa5b}' > /home/stack2/flag && echo 'flag{12ab1c90-6cb0-4102-a37a-c9a0e64a8734}' > /home/wdb_2018_2nd_easyfmt/flag && echo 'flag{eaeb8a3a-3b8c-4da5-8c7e-2a5251f42df1}' > /home/x32test/flag

# copy bin
COPY ./bin/1 /home/1/1
COPY ./catflag /home/1/bin/sh
COPY ./bin/2 /home/2/2
COPY ./catflag /home/2/bin/sh
COPY ./bin/32bit_pwn /home/32bit_pwn/32bit_pwn
COPY ./catflag /home/32bit_pwn/bin/sh
COPY ./bin/babyheap_0ctf_2017 /home/babyheap_0ctf_2017/babyheap_0ctf_2017
COPY ./catflag /home/babyheap_0ctf_2017/bin/sh
COPY ./bin/babyrop /home/babyrop/babyrop
COPY ./catflag /home/babyrop/bin/sh
COPY ./bin/bjdctf_2020_babyrop /home/bjdctf_2020_babyrop/bjdctf_2020_babyrop
COPY ./catflag /home/bjdctf_2020_babyrop/bin/sh
COPY ./bin/bjdctf_2020_babyrop2 /home/bjdctf_2020_babyrop2/bjdctf_2020_babyrop2
COPY ./catflag /home/bjdctf_2020_babyrop2/bin/sh
COPY ./bin/bs /home/bs/bs
COPY ./catflag /home/bs/bin/sh
COPY ./bin/bssbufpoc /home/bssbufpoc/bssbufpoc
COPY ./catflag /home/bssbufpoc/bin/sh
COPY ./bin/bssbufpoc2 /home/bssbufpoc2/bssbufpoc2
COPY ./catflag /home/bssbufpoc2/bin/sh
COPY ./bin/canarystack /home/canarystack/canarystack
COPY ./catflag /home/canarystack/bin/sh
COPY ./bin/canarystack_plus /home/canarystack_plus/canarystack_plus
COPY ./catflag /home/canarystack_plus/bin/sh
COPY ./bin/canarytest /home/canarytest/canarytest
COPY ./catflag /home/canarytest/bin/sh
COPY ./bin/ciscn_2019_n_3 /home/ciscn_2019_n_3/ciscn_2019_n_3
COPY ./catflag /home/ciscn_2019_n_3/bin/sh
COPY ./bin/easyrop /home/easyrop/easyrop
COPY ./catflag /home/easyrop/bin/sh
COPY ./bin/fm /home/fm/fm
COPY ./catflag /home/fm/bin/sh
COPY ./bin/fmt_0 /home/fmt_0/fmt_0
COPY ./catflag /home/fmt_0/bin/sh
COPY ./bin/fmt_1 /home/fmt_1/fmt_1
COPY ./catflag /home/fmt_1/bin/sh
COPY ./bin/fmt_2 /home/fmt_2/fmt_2
COPY ./catflag /home/fmt_2/bin/sh
COPY ./bin/fmt_arw /home/fmt_arw/fmt_arw
COPY ./catflag /home/fmt_arw/bin/sh
COPY ./bin/fmt_level100 /home/fmt_level100/fmt_level100
COPY ./catflag /home/fmt_level100/bin/sh
COPY ./bin/heap /home/heap/heap
COPY ./catflag /home/heap/bin/sh
COPY ./bin/not_stack_fmt /home/not_stack_fmt/not_stack_fmt
COPY ./catflag /home/not_stack_fmt/bin/sh
COPY ./bin/prob1 /home/prob1/prob1
COPY ./catflag /home/prob1/bin/sh
COPY ./bin/prob2 /home/prob2/prob2
COPY ./catflag /home/prob2/bin/sh
COPY ./bin/prob3 /home/prob3/prob3
COPY ./catflag /home/prob3/bin/sh
COPY ./bin/prob4 /home/prob4/prob4
COPY ./catflag /home/prob4/bin/sh
COPY ./bin/prob5 /home/prob5/prob5
COPY ./catflag /home/prob5/bin/sh
COPY ./bin/prob6 /home/prob6/prob6
COPY ./catflag /home/prob6/bin/sh
COPY ./bin/prob7 /home/prob7/prob7
COPY ./catflag /home/prob7/bin/sh
COPY ./bin/prob8 /home/prob8/prob8
COPY ./catflag /home/prob8/bin/sh
COPY ./bin/ret2libc /home/ret2libc/ret2libc
COPY ./catflag /home/ret2libc/bin/sh
COPY ./bin/sc_jmprsi /home/sc_jmprsi/sc_jmprsi
COPY ./catflag /home/sc_jmprsi/bin/sh
COPY ./bin/sc_jmprsp /home/sc_jmprsp/sc_jmprsp
COPY ./catflag /home/sc_jmprsp/bin/sh
COPY ./bin/spwn /home/spwn/spwn
COPY ./catflag /home/spwn/bin/sh
COPY ./bin/stack1 /home/stack1/stack1
COPY ./catflag /home/stack1/bin/sh
COPY ./bin/stack2 /home/stack2/stack2
COPY ./catflag /home/stack2/bin/sh
COPY ./bin/wdb_2018_2nd_easyfmt /home/wdb_2018_2nd_easyfmt/wdb_2018_2nd_easyfmt
COPY ./catflag /home/wdb_2018_2nd_easyfmt/bin/sh
COPY ./bin/x32test /home/x32test/x32test
COPY ./catflag /home/x32test/bin/sh


# chown & chmod
RUN chown -R root:1 /home/1 && chmod -R 750 /home/1 && chmod 740 /home/1/flag && chown -R root:2 /home/2 && chmod -R 750 /home/2 && chmod 740 /home/2/flag && chown -R root:32bit_pwn /home/32bit_pwn && chmod -R 750 /home/32bit_pwn && chmod 740 /home/32bit_pwn/flag && chown -R root:babyheap_0ctf_2017 /home/babyheap_0ctf_2017 && chmod -R 750 /home/babyheap_0ctf_2017 && chmod 740 /home/babyheap_0ctf_2017/flag && chown -R root:babyrop /home/babyrop && chmod -R 750 /home/babyrop && chmod 740 /home/babyrop/flag && chown -R root:bjdctf_2020_babyrop /home/bjdctf_2020_babyrop && chmod -R 750 /home/bjdctf_2020_babyrop && chmod 740 /home/bjdctf_2020_babyrop/flag && chown -R root:bjdctf_2020_babyrop2 /home/bjdctf_2020_babyrop2 && chmod -R 750 /home/bjdctf_2020_babyrop2 && chmod 740 /home/bjdctf_2020_babyrop2/flag && chown -R root:bs /home/bs && chmod -R 750 /home/bs && chmod 740 /home/bs/flag && chown -R root:bssbufpoc /home/bssbufpoc && chmod -R 750 /home/bssbufpoc && chmod 740 /home/bssbufpoc/flag && chown -R root:bssbufpoc2 /home/bssbufpoc2 && chmod -R 750 /home/bssbufpoc2 && chmod 740 /home/bssbufpoc2/flag && chown -R root:canarystack /home/canarystack && chmod -R 750 /home/canarystack && chmod 740 /home/canarystack/flag && chown -R root:canarystack_plus /home/canarystack_plus && chmod -R 750 /home/canarystack_plus && chmod 740 /home/canarystack_plus/flag && chown -R root:canarytest /home/canarytest && chmod -R 750 /home/canarytest && chmod 740 /home/canarytest/flag && chown -R root:ciscn_2019_n_3 /home/ciscn_2019_n_3 && chmod -R 750 /home/ciscn_2019_n_3 && chmod 740 /home/ciscn_2019_n_3/flag && chown -R root:easyrop /home/easyrop && chmod -R 750 /home/easyrop && chmod 740 /home/easyrop/flag && chown -R root:fm /home/fm && chmod -R 750 /home/fm && chmod 740 /home/fm/flag && chown -R root:fmt_0 /home/fmt_0 && chmod -R 750 /home/fmt_0 && chmod 740 /home/fmt_0/flag && chown -R root:fmt_1 /home/fmt_1 && chmod -R 750 /home/fmt_1 && chmod 740 /home/fmt_1/flag && chown -R root:fmt_2 /home/fmt_2 && chmod -R 750 /home/fmt_2 && chmod 740 /home/fmt_2/flag && chown -R root:fmt_arw /home/fmt_arw && chmod -R 750 /home/fmt_arw && chmod 740 /home/fmt_arw/flag && chown -R root:fmt_level100 /home/fmt_level100 && chmod -R 750 /home/fmt_level100 && chmod 740 /home/fmt_level100/flag && chown -R root:heap /home/heap && chmod -R 750 /home/heap && chmod 740 /home/heap/flag && chown -R root:not_stack_fmt /home/not_stack_fmt && chmod -R 750 /home/not_stack_fmt && chmod 740 /home/not_stack_fmt/flag && chown -R root:prob1 /home/prob1 && chmod -R 750 /home/prob1 && chmod 740 /home/prob1/flag && chown -R root:prob2 /home/prob2 && chmod -R 750 /home/prob2 && chmod 740 /home/prob2/flag && chown -R root:prob3 /home/prob3 && chmod -R 750 /home/prob3 && chmod 740 /home/prob3/flag && chown -R root:prob4 /home/prob4 && chmod -R 750 /home/prob4 && chmod 740 /home/prob4/flag && chown -R root:prob5 /home/prob5 && chmod -R 750 /home/prob5 && chmod 740 /home/prob5/flag && chown -R root:prob6 /home/prob6 && chmod -R 750 /home/prob6 && chmod 740 /home/prob6/flag && chown -R root:prob7 /home/prob7 && chmod -R 750 /home/prob7 && chmod 740 /home/prob7/flag && chown -R root:prob8 /home/prob8 && chmod -R 750 /home/prob8 && chmod 740 /home/prob8/flag && chown -R root:ret2libc /home/ret2libc && chmod -R 750 /home/ret2libc && chmod 740 /home/ret2libc/flag && chown -R root:sc_jmprsi /home/sc_jmprsi && chmod -R 750 /home/sc_jmprsi && chmod 740 /home/sc_jmprsi/flag && chown -R root:sc_jmprsp /home/sc_jmprsp && chmod -R 750 /home/sc_jmprsp && chmod 740 /home/sc_jmprsp/flag && chown -R root:spwn /home/spwn && chmod -R 750 /home/spwn && chmod 740 /home/spwn/flag && chown -R root:stack1 /home/stack1 && chmod -R 750 /home/stack1 && chmod 740 /home/stack1/flag && chown -R root:stack2 /home/stack2 && chmod -R 750 /home/stack2 && chmod 740 /home/stack2/flag && chown -R root:wdb_2018_2nd_easyfmt /home/wdb_2018_2nd_easyfmt && chmod -R 750 /home/wdb_2018_2nd_easyfmt && chmod 740 /home/wdb_2018_2nd_easyfmt/flag && chown -R root:x32test /home/x32test && chmod -R 750 /home/x32test && chmod 740 /home/x32test/flag

# copy lib,/bin 
RUN cp -R /lib* /home/1 && cp -R /usr/lib* /home/1 && mkdir /home/1/dev && mknod /home/1/dev/null c 1 3 && mknod /home/1/dev/zero c 1 5 && mknod /home/1/dev/random c 1 8 && mknod /home/1/dev/urandom c 1 9 && chmod 666 /home/1/dev/* && cp /bin/sh /home/1/bin && cp /bin/ls /home/1/bin && cp /bin/cat /home/1/bin && cp -R /lib* /home/2 && cp -R /usr/lib* /home/2 && mkdir /home/2/dev && mknod /home/2/dev/null c 1 3 && mknod /home/2/dev/zero c 1 5 && mknod /home/2/dev/random c 1 8 && mknod /home/2/dev/urandom c 1 9 && chmod 666 /home/2/dev/* && cp /bin/sh /home/2/bin && cp /bin/ls /home/2/bin && cp /bin/cat /home/2/bin && cp -R /lib* /home/32bit_pwn && cp -R /usr/lib* /home/32bit_pwn && mkdir /home/32bit_pwn/dev && mknod /home/32bit_pwn/dev/null c 1 3 && mknod /home/32bit_pwn/dev/zero c 1 5 && mknod /home/32bit_pwn/dev/random c 1 8 && mknod /home/32bit_pwn/dev/urandom c 1 9 && chmod 666 /home/32bit_pwn/dev/* && cp /bin/sh /home/32bit_pwn/bin && cp /bin/ls /home/32bit_pwn/bin && cp /bin/cat /home/32bit_pwn/bin && cp -R /lib* /home/babyheap_0ctf_2017 && cp -R /usr/lib* /home/babyheap_0ctf_2017 && mkdir /home/babyheap_0ctf_2017/dev && mknod /home/babyheap_0ctf_2017/dev/null c 1 3 && mknod /home/babyheap_0ctf_2017/dev/zero c 1 5 && mknod /home/babyheap_0ctf_2017/dev/random c 1 8 && mknod /home/babyheap_0ctf_2017/dev/urandom c 1 9 && chmod 666 /home/babyheap_0ctf_2017/dev/* && cp /bin/sh /home/babyheap_0ctf_2017/bin && cp /bin/ls /home/babyheap_0ctf_2017/bin && cp /bin/cat /home/babyheap_0ctf_2017/bin && cp -R /lib* /home/babyrop && cp -R /usr/lib* /home/babyrop && mkdir /home/babyrop/dev && mknod /home/babyrop/dev/null c 1 3 && mknod /home/babyrop/dev/zero c 1 5 && mknod /home/babyrop/dev/random c 1 8 && mknod /home/babyrop/dev/urandom c 1 9 && chmod 666 /home/babyrop/dev/* && cp /bin/sh /home/babyrop/bin && cp /bin/ls /home/babyrop/bin && cp /bin/cat /home/babyrop/bin && cp -R /lib* /home/bjdctf_2020_babyrop && cp -R /usr/lib* /home/bjdctf_2020_babyrop && mkdir /home/bjdctf_2020_babyrop/dev && mknod /home/bjdctf_2020_babyrop/dev/null c 1 3 && mknod /home/bjdctf_2020_babyrop/dev/zero c 1 5 && mknod /home/bjdctf_2020_babyrop/dev/random c 1 8 && mknod /home/bjdctf_2020_babyrop/dev/urandom c 1 9 && chmod 666 /home/bjdctf_2020_babyrop/dev/* && cp /bin/sh /home/bjdctf_2020_babyrop/bin && cp /bin/ls /home/bjdctf_2020_babyrop/bin && cp /bin/cat /home/bjdctf_2020_babyrop/bin && cp -R /lib* /home/bjdctf_2020_babyrop2 && cp -R /usr/lib* /home/bjdctf_2020_babyrop2 && mkdir /home/bjdctf_2020_babyrop2/dev && mknod /home/bjdctf_2020_babyrop2/dev/null c 1 3 && mknod /home/bjdctf_2020_babyrop2/dev/zero c 1 5 && mknod /home/bjdctf_2020_babyrop2/dev/random c 1 8 && mknod /home/bjdctf_2020_babyrop2/dev/urandom c 1 9 && chmod 666 /home/bjdctf_2020_babyrop2/dev/* && cp /bin/sh /home/bjdctf_2020_babyrop2/bin && cp /bin/ls /home/bjdctf_2020_babyrop2/bin && cp /bin/cat /home/bjdctf_2020_babyrop2/bin && cp -R /lib* /home/bs && cp -R /usr/lib* /home/bs && mkdir /home/bs/dev && mknod /home/bs/dev/null c 1 3 && mknod /home/bs/dev/zero c 1 5 && mknod /home/bs/dev/random c 1 8 && mknod /home/bs/dev/urandom c 1 9 && chmod 666 /home/bs/dev/* && cp /bin/sh /home/bs/bin && cp /bin/ls /home/bs/bin && cp /bin/cat /home/bs/bin && cp -R /lib* /home/bssbufpoc && cp -R /usr/lib* /home/bssbufpoc && mkdir /home/bssbufpoc/dev && mknod /home/bssbufpoc/dev/null c 1 3 && mknod /home/bssbufpoc/dev/zero c 1 5 && mknod /home/bssbufpoc/dev/random c 1 8 && mknod /home/bssbufpoc/dev/urandom c 1 9 && chmod 666 /home/bssbufpoc/dev/* && cp /bin/sh /home/bssbufpoc/bin && cp /bin/ls /home/bssbufpoc/bin && cp /bin/cat /home/bssbufpoc/bin && cp -R /lib* /home/bssbufpoc2 && cp -R /usr/lib* /home/bssbufpoc2 && mkdir /home/bssbufpoc2/dev && mknod /home/bssbufpoc2/dev/null c 1 3 && mknod /home/bssbufpoc2/dev/zero c 1 5 && mknod /home/bssbufpoc2/dev/random c 1 8 && mknod /home/bssbufpoc2/dev/urandom c 1 9 && chmod 666 /home/bssbufpoc2/dev/* && cp /bin/sh /home/bssbufpoc2/bin && cp /bin/ls /home/bssbufpoc2/bin && cp /bin/cat /home/bssbufpoc2/bin && cp -R /lib* /home/canarystack && cp -R /usr/lib* /home/canarystack && mkdir /home/canarystack/dev && mknod /home/canarystack/dev/null c 1 3 && mknod /home/canarystack/dev/zero c 1 5 && mknod /home/canarystack/dev/random c 1 8 && mknod /home/canarystack/dev/urandom c 1 9 && chmod 666 /home/canarystack/dev/* && cp /bin/sh /home/canarystack/bin && cp /bin/ls /home/canarystack/bin && cp /bin/cat /home/canarystack/bin && cp -R /lib* /home/canarystack_plus && cp -R /usr/lib* /home/canarystack_plus && mkdir /home/canarystack_plus/dev && mknod /home/canarystack_plus/dev/null c 1 3 && mknod /home/canarystack_plus/dev/zero c 1 5 && mknod /home/canarystack_plus/dev/random c 1 8 && mknod /home/canarystack_plus/dev/urandom c 1 9 && chmod 666 /home/canarystack_plus/dev/* && cp /bin/sh /home/canarystack_plus/bin && cp /bin/ls /home/canarystack_plus/bin && cp /bin/cat /home/canarystack_plus/bin && cp -R /lib* /home/canarytest && cp -R /usr/lib* /home/canarytest && mkdir /home/canarytest/dev && mknod /home/canarytest/dev/null c 1 3 && mknod /home/canarytest/dev/zero c 1 5 && mknod /home/canarytest/dev/random c 1 8 && mknod /home/canarytest/dev/urandom c 1 9 && chmod 666 /home/canarytest/dev/* && cp /bin/sh /home/canarytest/bin && cp /bin/ls /home/canarytest/bin && cp /bin/cat /home/canarytest/bin && cp -R /lib* /home/ciscn_2019_n_3 && cp -R /usr/lib* /home/ciscn_2019_n_3 && mkdir /home/ciscn_2019_n_3/dev && mknod /home/ciscn_2019_n_3/dev/null c 1 3 && mknod /home/ciscn_2019_n_3/dev/zero c 1 5 && mknod /home/ciscn_2019_n_3/dev/random c 1 8 && mknod /home/ciscn_2019_n_3/dev/urandom c 1 9 && chmod 666 /home/ciscn_2019_n_3/dev/* && cp /bin/sh /home/ciscn_2019_n_3/bin && cp /bin/ls /home/ciscn_2019_n_3/bin && cp /bin/cat /home/ciscn_2019_n_3/bin && cp -R /lib* /home/easyrop && cp -R /usr/lib* /home/easyrop && mkdir /home/easyrop/dev && mknod /home/easyrop/dev/null c 1 3 && mknod /home/easyrop/dev/zero c 1 5 && mknod /home/easyrop/dev/random c 1 8 && mknod /home/easyrop/dev/urandom c 1 9 && chmod 666 /home/easyrop/dev/* && cp /bin/sh /home/easyrop/bin && cp /bin/ls /home/easyrop/bin && cp /bin/cat /home/easyrop/bin && cp -R /lib* /home/fm && cp -R /usr/lib* /home/fm && mkdir /home/fm/dev && mknod /home/fm/dev/null c 1 3 && mknod /home/fm/dev/zero c 1 5 && mknod /home/fm/dev/random c 1 8 && mknod /home/fm/dev/urandom c 1 9 && chmod 666 /home/fm/dev/* && cp /bin/sh /home/fm/bin && cp /bin/ls /home/fm/bin && cp /bin/cat /home/fm/bin && cp -R /lib* /home/fmt_0 && cp -R /usr/lib* /home/fmt_0 && mkdir /home/fmt_0/dev && mknod /home/fmt_0/dev/null c 1 3 && mknod /home/fmt_0/dev/zero c 1 5 && mknod /home/fmt_0/dev/random c 1 8 && mknod /home/fmt_0/dev/urandom c 1 9 && chmod 666 /home/fmt_0/dev/* && cp /bin/sh /home/fmt_0/bin && cp /bin/ls /home/fmt_0/bin && cp /bin/cat /home/fmt_0/bin && cp -R /lib* /home/fmt_1 && cp -R /usr/lib* /home/fmt_1 && mkdir /home/fmt_1/dev && mknod /home/fmt_1/dev/null c 1 3 && mknod /home/fmt_1/dev/zero c 1 5 && mknod /home/fmt_1/dev/random c 1 8 && mknod /home/fmt_1/dev/urandom c 1 9 && chmod 666 /home/fmt_1/dev/* && cp /bin/sh /home/fmt_1/bin && cp /bin/ls /home/fmt_1/bin && cp /bin/cat /home/fmt_1/bin && cp -R /lib* /home/fmt_2 && cp -R /usr/lib* /home/fmt_2 && mkdir /home/fmt_2/dev && mknod /home/fmt_2/dev/null c 1 3 && mknod /home/fmt_2/dev/zero c 1 5 && mknod /home/fmt_2/dev/random c 1 8 && mknod /home/fmt_2/dev/urandom c 1 9 && chmod 666 /home/fmt_2/dev/* && cp /bin/sh /home/fmt_2/bin && cp /bin/ls /home/fmt_2/bin && cp /bin/cat /home/fmt_2/bin && cp -R /lib* /home/fmt_arw && cp -R /usr/lib* /home/fmt_arw && mkdir /home/fmt_arw/dev && mknod /home/fmt_arw/dev/null c 1 3 && mknod /home/fmt_arw/dev/zero c 1 5 && mknod /home/fmt_arw/dev/random c 1 8 && mknod /home/fmt_arw/dev/urandom c 1 9 && chmod 666 /home/fmt_arw/dev/* && cp /bin/sh /home/fmt_arw/bin && cp /bin/ls /home/fmt_arw/bin && cp /bin/cat /home/fmt_arw/bin && cp -R /lib* /home/fmt_level100 && cp -R /usr/lib* /home/fmt_level100 && mkdir /home/fmt_level100/dev && mknod /home/fmt_level100/dev/null c 1 3 && mknod /home/fmt_level100/dev/zero c 1 5 && mknod /home/fmt_level100/dev/random c 1 8 && mknod /home/fmt_level100/dev/urandom c 1 9 && chmod 666 /home/fmt_level100/dev/* && cp /bin/sh /home/fmt_level100/bin && cp /bin/ls /home/fmt_level100/bin && cp /bin/cat /home/fmt_level100/bin && cp -R /lib* /home/heap && cp -R /usr/lib* /home/heap && mkdir /home/heap/dev && mknod /home/heap/dev/null c 1 3 && mknod /home/heap/dev/zero c 1 5 && mknod /home/heap/dev/random c 1 8 && mknod /home/heap/dev/urandom c 1 9 && chmod 666 /home/heap/dev/* && cp /bin/sh /home/heap/bin && cp /bin/ls /home/heap/bin && cp /bin/cat /home/heap/bin && cp -R /lib* /home/not_stack_fmt && cp -R /usr/lib* /home/not_stack_fmt && mkdir /home/not_stack_fmt/dev && mknod /home/not_stack_fmt/dev/null c 1 3 && mknod /home/not_stack_fmt/dev/zero c 1 5 && mknod /home/not_stack_fmt/dev/random c 1 8 && mknod /home/not_stack_fmt/dev/urandom c 1 9 && chmod 666 /home/not_stack_fmt/dev/* && cp /bin/sh /home/not_stack_fmt/bin && cp /bin/ls /home/not_stack_fmt/bin && cp /bin/cat /home/not_stack_fmt/bin && cp -R /lib* /home/prob1 && cp -R /usr/lib* /home/prob1 && mkdir /home/prob1/dev && mknod /home/prob1/dev/null c 1 3 && mknod /home/prob1/dev/zero c 1 5 && mknod /home/prob1/dev/random c 1 8 && mknod /home/prob1/dev/urandom c 1 9 && chmod 666 /home/prob1/dev/* && cp /bin/sh /home/prob1/bin && cp /bin/ls /home/prob1/bin && cp /bin/cat /home/prob1/bin && cp -R /lib* /home/prob2 && cp -R /usr/lib* /home/prob2 && mkdir /home/prob2/dev && mknod /home/prob2/dev/null c 1 3 && mknod /home/prob2/dev/zero c 1 5 && mknod /home/prob2/dev/random c 1 8 && mknod /home/prob2/dev/urandom c 1 9 && chmod 666 /home/prob2/dev/* && cp /bin/sh /home/prob2/bin && cp /bin/ls /home/prob2/bin && cp /bin/cat /home/prob2/bin && cp -R /lib* /home/prob3 && cp -R /usr/lib* /home/prob3 && mkdir /home/prob3/dev && mknod /home/prob3/dev/null c 1 3 && mknod /home/prob3/dev/zero c 1 5 && mknod /home/prob3/dev/random c 1 8 && mknod /home/prob3/dev/urandom c 1 9 && chmod 666 /home/prob3/dev/* && cp /bin/sh /home/prob3/bin && cp /bin/ls /home/prob3/bin && cp /bin/cat /home/prob3/bin && cp -R /lib* /home/prob4 && cp -R /usr/lib* /home/prob4 && mkdir /home/prob4/dev && mknod /home/prob4/dev/null c 1 3 && mknod /home/prob4/dev/zero c 1 5 && mknod /home/prob4/dev/random c 1 8 && mknod /home/prob4/dev/urandom c 1 9 && chmod 666 /home/prob4/dev/* && cp /bin/sh /home/prob4/bin && cp /bin/ls /home/prob4/bin && cp /bin/cat /home/prob4/bin && cp -R /lib* /home/prob5 && cp -R /usr/lib* /home/prob5 && mkdir /home/prob5/dev && mknod /home/prob5/dev/null c 1 3 && mknod /home/prob5/dev/zero c 1 5 && mknod /home/prob5/dev/random c 1 8 && mknod /home/prob5/dev/urandom c 1 9 && chmod 666 /home/prob5/dev/* && cp /bin/sh /home/prob5/bin && cp /bin/ls /home/prob5/bin && cp /bin/cat /home/prob5/bin && cp -R /lib* /home/prob6 && cp -R /usr/lib* /home/prob6 && mkdir /home/prob6/dev && mknod /home/prob6/dev/null c 1 3 && mknod /home/prob6/dev/zero c 1 5 && mknod /home/prob6/dev/random c 1 8 && mknod /home/prob6/dev/urandom c 1 9 && chmod 666 /home/prob6/dev/* && cp /bin/sh /home/prob6/bin && cp /bin/ls /home/prob6/bin && cp /bin/cat /home/prob6/bin && cp -R /lib* /home/prob7 && cp -R /usr/lib* /home/prob7 && mkdir /home/prob7/dev && mknod /home/prob7/dev/null c 1 3 && mknod /home/prob7/dev/zero c 1 5 && mknod /home/prob7/dev/random c 1 8 && mknod /home/prob7/dev/urandom c 1 9 && chmod 666 /home/prob7/dev/* && cp /bin/sh /home/prob7/bin && cp /bin/ls /home/prob7/bin && cp /bin/cat /home/prob7/bin && cp -R /lib* /home/prob8 && cp -R /usr/lib* /home/prob8 && mkdir /home/prob8/dev && mknod /home/prob8/dev/null c 1 3 && mknod /home/prob8/dev/zero c 1 5 && mknod /home/prob8/dev/random c 1 8 && mknod /home/prob8/dev/urandom c 1 9 && chmod 666 /home/prob8/dev/* && cp /bin/sh /home/prob8/bin && cp /bin/ls /home/prob8/bin && cp /bin/cat /home/prob8/bin && cp -R /lib* /home/ret2libc && cp -R /usr/lib* /home/ret2libc && mkdir /home/ret2libc/dev && mknod /home/ret2libc/dev/null c 1 3 && mknod /home/ret2libc/dev/zero c 1 5 && mknod /home/ret2libc/dev/random c 1 8 && mknod /home/ret2libc/dev/urandom c 1 9 && chmod 666 /home/ret2libc/dev/* && cp /bin/sh /home/ret2libc/bin && cp /bin/ls /home/ret2libc/bin && cp /bin/cat /home/ret2libc/bin && cp -R /lib* /home/sc_jmprsi && cp -R /usr/lib* /home/sc_jmprsi && mkdir /home/sc_jmprsi/dev && mknod /home/sc_jmprsi/dev/null c 1 3 && mknod /home/sc_jmprsi/dev/zero c 1 5 && mknod /home/sc_jmprsi/dev/random c 1 8 && mknod /home/sc_jmprsi/dev/urandom c 1 9 && chmod 666 /home/sc_jmprsi/dev/* && cp /bin/sh /home/sc_jmprsi/bin && cp /bin/ls /home/sc_jmprsi/bin && cp /bin/cat /home/sc_jmprsi/bin && cp -R /lib* /home/sc_jmprsp && cp -R /usr/lib* /home/sc_jmprsp && mkdir /home/sc_jmprsp/dev && mknod /home/sc_jmprsp/dev/null c 1 3 && mknod /home/sc_jmprsp/dev/zero c 1 5 && mknod /home/sc_jmprsp/dev/random c 1 8 && mknod /home/sc_jmprsp/dev/urandom c 1 9 && chmod 666 /home/sc_jmprsp/dev/* && cp /bin/sh /home/sc_jmprsp/bin && cp /bin/ls /home/sc_jmprsp/bin && cp /bin/cat /home/sc_jmprsp/bin && cp -R /lib* /home/spwn && cp -R /usr/lib* /home/spwn && mkdir /home/spwn/dev && mknod /home/spwn/dev/null c 1 3 && mknod /home/spwn/dev/zero c 1 5 && mknod /home/spwn/dev/random c 1 8 && mknod /home/spwn/dev/urandom c 1 9 && chmod 666 /home/spwn/dev/* && cp /bin/sh /home/spwn/bin && cp /bin/ls /home/spwn/bin && cp /bin/cat /home/spwn/bin && cp -R /lib* /home/stack1 && cp -R /usr/lib* /home/stack1 && mkdir /home/stack1/dev && mknod /home/stack1/dev/null c 1 3 && mknod /home/stack1/dev/zero c 1 5 && mknod /home/stack1/dev/random c 1 8 && mknod /home/stack1/dev/urandom c 1 9 && chmod 666 /home/stack1/dev/* && cp /bin/sh /home/stack1/bin && cp /bin/ls /home/stack1/bin && cp /bin/cat /home/stack1/bin && cp -R /lib* /home/stack2 && cp -R /usr/lib* /home/stack2 && mkdir /home/stack2/dev && mknod /home/stack2/dev/null c 1 3 && mknod /home/stack2/dev/zero c 1 5 && mknod /home/stack2/dev/random c 1 8 && mknod /home/stack2/dev/urandom c 1 9 && chmod 666 /home/stack2/dev/* && cp /bin/sh /home/stack2/bin && cp /bin/ls /home/stack2/bin && cp /bin/cat /home/stack2/bin && cp -R /lib* /home/wdb_2018_2nd_easyfmt && cp -R /usr/lib* /home/wdb_2018_2nd_easyfmt && mkdir /home/wdb_2018_2nd_easyfmt/dev && mknod /home/wdb_2018_2nd_easyfmt/dev/null c 1 3 && mknod /home/wdb_2018_2nd_easyfmt/dev/zero c 1 5 && mknod /home/wdb_2018_2nd_easyfmt/dev/random c 1 8 && mknod /home/wdb_2018_2nd_easyfmt/dev/urandom c 1 9 && chmod 666 /home/wdb_2018_2nd_easyfmt/dev/* && cp /bin/sh /home/wdb_2018_2nd_easyfmt/bin && cp /bin/ls /home/wdb_2018_2nd_easyfmt/bin && cp /bin/cat /home/wdb_2018_2nd_easyfmt/bin && cp -R /lib* /home/x32test && cp -R /usr/lib* /home/x32test && mkdir /home/x32test/dev && mknod /home/x32test/dev/null c 1 3 && mknod /home/x32test/dev/zero c 1 5 && mknod /home/x32test/dev/random c 1 8 && mknod /home/x32test/dev/urandom c 1 9 && chmod 666 /home/x32test/dev/* && cp /bin/sh /home/x32test/bin && cp /bin/ls /home/x32test/bin && cp /bin/cat /home/x32test/bin

CMD ["/service.sh"]
